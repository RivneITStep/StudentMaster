function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var c=e[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{kNNV:function(t,e,i){"use strict";i.r(e);var c,a=i("ofXK"),n=i("tyNb"),o=i("auE4"),s=i("g6P3"),l=i("ifH6"),r=i("D7qI"),u=i("0IaG"),b=i("fXoL"),d=i("kmnG"),f=i("qFsG"),m=i("bTqV"),h=((c=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.userEmail="",this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"onSubmit",value:function(){var t=this;this.isLoading=!0,this.adminService.inviteUser(this.userEmail,this.data.classId).subscribe((function(){t.tools.showNotification("User has been invited"),t.isLoading=!1,t.dialogRef.close()}),(function(){t.isLoading=!1,t.dialogRef.close()}))}}]),t}()).\u0275fac=function(t){return new(t||c)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},c.\u0275cmp=b.Mb({type:c,selectors:[["app-invite-user"]],decls:12,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],["matInput","","placeholder","Input user's emai",3,"input"],["mat-raised-button","","color","primary",2,"margin-left","1rem","margin-right","1rem",3,"disabled","click"],["mat-raised-button","","color","accent",2,"margin-left","1rem","margin-right","1rem",3,"disabled","click"],["mat-dialog-actions",""]],template:function(t,e){1&t&&(b.Yb(0,"h1",0),b.Mc(1,"ADD STUDENT"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-label"),b.Mc(5,"Input user's email"),b.Xb(),b.Yb(6,"input",3),b.gc("input",(function(t){return e.userEmail=t.target.value})),b.Xb(),b.Xb(),b.Yb(7,"button",4),b.gc("click",(function(t){return e.onSubmit()})),b.Mc(8,"Invite"),b.Xb(),b.Yb(9,"button",5),b.gc("click",(function(t){return e.cancel()})),b.Mc(10,"Cancel"),b.Xb(),b.Xb(),b.Tb(11,"div",6)),2&t&&(b.Eb(7),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading))},directives:[u.g,u.d,d.b,d.f,f.b,m.b,u.c],styles:[""]}),c),p=i("3Pt+"),g=i("A5z7"),v=i("/1cH"),C=i("NFeN"),k=i("FKr1");function S(t,e){1&t&&(b.Yb(0,"mat-icon",15),b.Mc(1,"cancel"),b.Xb())}function y(t,e){if(1&t){var i=b.Zb();b.Yb(0,"mat-chip",13),b.gc("removed",(function(t){b.Dc(i);var c=e.$implicit;return b.kc().remove(c)})),b.Mc(1),b.Kc(2,S,2,0,"mat-icon",14),b.Xb()}if(2&t){var c=e.$implicit,a=b.kc();b.qc("selectable",a.selectable)("removable",a.removable),b.Eb(1),b.Oc(" ",c.name," "),b.Eb(1),b.qc("ngIf",a.removable)}}function I(t,e){if(1&t&&(b.Yb(0,"mat-option",16),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.qc("value",i),b.Eb(1),b.Oc(" ",i.name," ")}}var X,Y=((X=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.fruitCtrl=new p.f,this.subjects=[],this.allSubjects=[],this.userEmail="",this.isLoading=!1,this.update()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"add",value:function(t){console.log(t),this.fruitCtrl.setValue(null)}},{key:"remove",value:function(t){var e=this;this.adminService.editSubjectsInClass(this.data.classId,t.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"selected",value:function(t){var e=this;console.log(t),this.adminService.editSubjectsInClass(this.data.classId,t.option.value.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"update",value:function(){var t=this;this.isLoading=!0,this.adminService.getAllSubjects().subscribe((function(e){t.allSubjects=e,t.adminService.getClassSubjects(t.data.classId).subscribe((function(e){t.subjects=e,t.isLoading=!1,t.subjects.forEach((function(e){t.allSubjects.find((function(t){return t.id===e.id}))&&(t.allSubjects=t.allSubjects.filter((function(t){return t.id!==e.id})))}))}))}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||X)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},X.\u0275cmp=b.Mb({type:X,selectors:[["app-edit-subjects-in-class"]],decls:15,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],["aria-label","Subjects selection"],["chipList",""],["color","accent",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Subjects",3,"formControl","matAutocomplete","matChipInputFor","matChipInputTokenEnd"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["color","accent",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(t,e){if(1&t&&(b.Yb(0,"h1",0),b.Mc(1,"EDIT SUBJECTS"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-chip-list",3,4),b.Kc(6,y,3,4,"mat-chip",5),b.Yb(7,"input",6,7),b.gc("matChipInputTokenEnd",(function(t){return e.add(t)})),b.Xb(),b.Xb(),b.Yb(9,"mat-autocomplete",8,9),b.gc("optionSelected",(function(t){return e.selected(t)})),b.Kc(11,I,2,2,"mat-option",10),b.Xb(),b.Xb(),b.Xb(),b.Yb(12,"div",11),b.Yb(13,"button",12),b.gc("click",(function(t){return e.close()})),b.Mc(14,"Close"),b.Xb(),b.Xb()),2&t){var i=b.zc(5),c=b.zc(10);b.Eb(6),b.qc("ngForOf",e.subjects),b.Eb(1),b.qc("formControl",e.fruitCtrl)("matAutocomplete",c)("matChipInputFor",i),b.Eb(4),b.qc("ngForOf",e.allSubjects),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading)}},directives:[u.g,u.d,d.b,g.c,a.k,p.c,v.c,g.b,p.o,p.g,v.a,u.c,m.b,g.a,a.l,C.a,g.d,k.n],styles:[""]}),X);function E(t,e){1&t&&(b.Yb(0,"mat-icon",15),b.Mc(1,"cancel"),b.Xb())}function w(t,e){if(1&t){var i=b.Zb();b.Yb(0,"mat-chip",13),b.gc("removed",(function(t){b.Dc(i);var c=e.$implicit;return b.kc().remove(c)})),b.Mc(1),b.Kc(2,E,2,0,"mat-icon",14),b.Xb()}if(2&t){var c=e.$implicit,a=b.kc();b.qc("selectable",a.selectable)("removable",a.removable),b.Eb(1),b.Oc(" ",c.pib," "),b.Eb(1),b.qc("ngIf",a.removable)}}function M(t,e){if(1&t&&(b.Yb(0,"mat-option",16),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.qc("value",i),b.Eb(1),b.Oc(" ",i.pib," ")}}var q,R=((q=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.teacherCtrl=new p.f,this.teachers=[],this.allTeachers=[],this.userEmail="",this.isLoading=!1,this.update()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"add",value:function(t){console.log(t),this.teacherCtrl.setValue(null)}},{key:"remove",value:function(t){var e=this;this.adminService.editTeachersInClass(this.data.classId,t.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"selected",value:function(t){var e=this;console.log(t),this.adminService.editTeachersInClass(this.data.classId,t.option.value.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"update",value:function(){var t=this;this.isLoading=!0,this.adminService.getAllTeachers().subscribe((function(e){t.allTeachers=e,t.adminService.getClassTeachers(t.data.classId).subscribe((function(e){t.teachers=e,t.isLoading=!1,t.teachers.forEach((function(e){t.allTeachers.find((function(t){return t.id===e.id}))&&(t.allTeachers=t.allTeachers.filter((function(t){return t.id!==e.id})))}))}))}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||q)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},q.\u0275cmp=b.Mb({type:q,selectors:[["app-edit-teachers-in-class"]],decls:15,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],["aria-label","Subjects selection"],["chipList",""],["color","accent",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Teachers",3,"formControl","matAutocomplete","matChipInputFor","matChipInputTokenEnd"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["color","accent",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(t,e){if(1&t&&(b.Yb(0,"h1",0),b.Mc(1,"EDIT TEACHERS"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-chip-list",3,4),b.Kc(6,w,3,4,"mat-chip",5),b.Yb(7,"input",6,7),b.gc("matChipInputTokenEnd",(function(t){return e.add(t)})),b.Xb(),b.Xb(),b.Yb(9,"mat-autocomplete",8,9),b.gc("optionSelected",(function(t){return e.selected(t)})),b.Kc(11,M,2,2,"mat-option",10),b.Xb(),b.Xb(),b.Xb(),b.Yb(12,"div",11),b.Yb(13,"button",12),b.gc("click",(function(t){return e.close()})),b.Mc(14,"Close"),b.Xb(),b.Xb()),2&t){var i=b.zc(5),c=b.zc(10);b.Eb(6),b.qc("ngForOf",e.teachers),b.Eb(1),b.qc("formControl",e.teacherCtrl)("matAutocomplete",c)("matChipInputFor",i),b.Eb(4),b.qc("ngForOf",e.allTeachers),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading)}},directives:[u.g,u.d,d.b,g.c,a.k,p.c,v.c,g.b,p.o,p.g,v.a,u.c,m.b,g.a,a.l,C.a,g.d,k.n],styles:[""]}),q),T=i("kt0X"),O=i("wZkO"),D=i("lfTk"),F=i("+0xr");function L(t,e){1&t&&(b.Yb(0,"th",14),b.Mc(1," No. "),b.Xb())}function j(t,e){if(1&t&&(b.Yb(0,"td",15),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.Eb(1),b.Oc(" ",i.position," ")}}function K(t,e){1&t&&(b.Yb(0,"th",14),b.Mc(1," PIB "),b.Xb())}function _(t,e){if(1&t&&(b.Yb(0,"p"),b.Mc(1),b.Xb()),2&t){var i=b.kc().$implicit;b.Eb(1),b.Oc(" ",i.pib," ")}}function N(t,e){1&t&&(b.Yb(0,"strong"),b.Mc(1,"[UNKNOWN]"),b.Xb())}function $(t,e){if(1&t&&(b.Yb(0,"td",15),b.Kc(1,_,2,1,"p",16),b.Kc(2,N,2,0,"strong",16),b.Xb()),2&t){var i=e.$implicit;b.Eb(1),b.qc("ngIf",i.pib),b.Eb(1),b.qc("ngIf",0==i.pib.trim().length)}}function A(t,e){1&t&&(b.Yb(0,"th",14),b.Mc(1," Actions "),b.Xb())}function U(t,e){if(1&t){var i=b.Zb();b.Yb(0,"td",15),b.Yb(1,"button",17),b.gc("click",(function(t){b.Dc(i);var c=e.$implicit;return b.kc(2).removeFromClass(c.id)})),b.Mc(2,"Remove from class"),b.Xb(),b.Xb()}}function P(t,e){1&t&&(b.Yb(0,"th",14),b.Mc(1," Control Work "),b.Xb())}function H(t,e){1&t&&b.Tb(0,"td",15)}function x(t,e){1&t&&b.Tb(0,"tr",18)}function z(t,e){1&t&&b.Tb(0,"tr",19)}function V(t,e){if(1&t){var i=b.Zb();b.Yb(0,"mat-tab",2),b.Yb(1,"div",3),b.Yb(2,"button",4),b.gc("click",(function(t){return b.Dc(i),b.kc().inviteStudent()})),b.Mc(3,"Invite a student"),b.Xb(),b.Yb(4,"button",4),b.gc("click",(function(t){return b.Dc(i),b.kc().editSubjects()})),b.Mc(5,"Edit subjects"),b.Xb(),b.Yb(6,"button",4),b.gc("click",(function(t){return b.Dc(i),b.kc().editTeachers()})),b.Mc(7,"Edit teachers"),b.Xb(),b.Tb(8,"br"),b.Tb(9,"app-group-chat"),b.Yb(10,"table",5),b.Wb(11,6),b.Kc(12,L,2,0,"th",7),b.Kc(13,j,2,1,"td",8),b.Vb(),b.Wb(14,9),b.Kc(15,K,2,0,"th",7),b.Kc(16,$,3,2,"td",8),b.Vb(),b.Wb(17,10),b.Kc(18,A,2,0,"th",7),b.Kc(19,U,3,0,"td",8),b.Vb(),b.Wb(20,11),b.Kc(21,P,2,0,"th",7),b.Kc(22,H,1,0,"td",8),b.Vb(),b.Kc(23,x,1,0,"tr",12),b.Kc(24,z,1,0,"tr",13),b.Xb(),b.Xb(),b.Xb()}if(2&t){var c=e.$implicit,a=b.kc();b.rc("label",c.name),b.Eb(9),b.Gb(c.id),b.Eb(1),b.qc("dataSource",a.dataSource),b.Eb(13),b.qc("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),b.Eb(1),b.qc("matRowDefColumns",a.displayedColumns)}}var W,Z=((W=function(){function t(e,i,c,a){_classCallCheck(this,t),this.dialog=e,this.store=i,this.admin=c,this.tools=a,this.displayedColumns=["position","PIB","Marks"],this.selectedClass=0,this.classes=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.admin.getAllClasses().subscribe((function(e){t.classes=e,0!==e.length&&(t.selectedClass=e[0].id,t.store.dispatch(new o.c(e[0].id)),t.store.dispatch(new o.a(e[0].id)))})),this.store.select("teacher").subscribe((function(e){t.dataSource=e.students}))}},{key:"openDialog",value:function(t){this.dialog.open(s.a,{width:"90%",data:{id:t,classId:this.selectedClass}}).afterClosed()}},{key:"inviteStudent",value:function(){var t=this;this.dialog.open(h,{width:"90%",data:{classId:this.selectedClass}}).afterClosed().subscribe((function(e){return t.store.dispatch(new o.a(t.selectedClass))}))}},{key:"editSubjects",value:function(){this.dialog.open(Y,{width:"90%",data:{classId:this.selectedClass}}).afterClosed()}},{key:"editTeachers",value:function(){this.dialog.open(R,{width:"90%",data:{classId:this.selectedClass}}).afterClosed()}},{key:"removeFromClass",value:function(t){var e=this;this.admin.removeStudentFromClass(t).subscribe((function(){e.tools.showNotification("Student has been removed!"),e.store.dispatch(new o.a(e.selectedClass))}))}},{key:"onChange",value:function(t){console.log(t),this.selectedClass=this.classes[t].id,this.store.dispatch(new o.c(this.classes[t].id)),this.store.dispatch(new o.a(this.classes[t].id))}}]),t}()).\u0275fac=function(t){return new(t||W)(b.Sb(u.b),b.Sb(T.h),b.Sb(l.a),b.Sb(r.a))},W.\u0275cmp=b.Mb({type:W,selectors:[["app-classes"]],decls:2,vars:1,consts:[["mat-align-tabs","center","animationDuration","2000ms",3,"selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[1,"container-fluid"],["mat-stroked-button","","color","accent",1,"cell-md-3","cell-12",2,"margin","1rem",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","PIB"],["matColumnDef","Marks"],["matColumnDef","ControlMark"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-raised-button","","color","warn",2,"margin","1rem",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Yb(0,"mat-tab-group",0),b.gc("selectedIndexChange",(function(t){return e.onChange(t)})),b.Kc(1,V,25,7,"mat-tab",1),b.Xb()),2&t&&(b.Eb(1),b.qc("ngForOf",e.classes))},directives:[O.b,a.k,O.a,m.b,D.a,F.j,F.c,F.e,F.b,F.g,F.i,F.d,F.a,a.l,F.f,F.h],styles:[""]}),W),B=i("M9IT");function G(t,e){1&t&&(b.Yb(0,"mat-icon",15),b.Mc(1,"cancel"),b.Xb())}function J(t,e){if(1&t){var i=b.Zb();b.Yb(0,"mat-chip",13),b.gc("removed",(function(t){b.Dc(i);var c=e.$implicit;return b.kc().remove(c)})),b.Mc(1),b.Kc(2,G,2,0,"mat-icon",14),b.Xb()}if(2&t){var c=e.$implicit,a=b.kc();b.qc("selectable",a.selectable)("removable",a.removable),b.Eb(1),b.Oc(" ",c," "),b.Eb(1),b.qc("ngIf",a.removable)}}function Q(t,e){if(1&t&&(b.Yb(0,"mat-option",16),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.qc("value",i),b.Eb(1),b.Oc(" ",i," ")}}var tt,et=((tt=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.fruitCtrl=new p.f,this.roles=[],this.allRoles=[],this.userEmail="",this.isLoading=!1,this.update()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"add",value:function(t){console.log(t),this.fruitCtrl.setValue(null)}},{key:"remove",value:function(t){var e=this;this.adminService.changeRolesInUser(this.data.uid,t).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"selected",value:function(t){var e=this;console.log(t),this.adminService.changeRolesInUser(this.data.uid,t.option.value).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"update",value:function(){var t=this;this.isLoading=!0,this.adminService.getAllRoles().subscribe((function(e){t.allRoles=e,t.adminService.getRolesByUID(t.data.uid).subscribe((function(e){t.roles=e,t.isLoading=!1,t.roles.forEach((function(e){t.allRoles.find((function(t){return t===e}))&&(t.allRoles=t.allRoles.filter((function(t){return t!==e})))}))}))}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||tt)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},tt.\u0275cmp=b.Mb({type:tt,selectors:[["app-change-roles"]],decls:15,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],["aria-label","Roles selection"],["chipList",""],["color","accent",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Roles",3,"formControl","matAutocomplete","matChipInputFor","matChipInputTokenEnd"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["color","accent",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(t,e){if(1&t&&(b.Yb(0,"h1",0),b.Mc(1,"EDIT Roles"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-chip-list",3,4),b.Kc(6,J,3,4,"mat-chip",5),b.Yb(7,"input",6,7),b.gc("matChipInputTokenEnd",(function(t){return e.add(t)})),b.Xb(),b.Xb(),b.Yb(9,"mat-autocomplete",8,9),b.gc("optionSelected",(function(t){return e.selected(t)})),b.Kc(11,Q,2,2,"mat-option",10),b.Xb(),b.Xb(),b.Xb(),b.Yb(12,"div",11),b.Yb(13,"button",12),b.gc("click",(function(t){return e.close()})),b.Mc(14,"Close"),b.Xb(),b.Xb()),2&t){var i=b.zc(5),c=b.zc(10);b.Eb(6),b.qc("ngForOf",e.roles),b.Eb(1),b.qc("formControl",e.fruitCtrl)("matAutocomplete",c)("matChipInputFor",i),b.Eb(4),b.qc("ngForOf",e.allRoles),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading)}},directives:[u.g,u.d,d.b,g.c,a.k,p.c,v.c,g.b,p.o,p.g,v.a,u.c,m.b,g.a,a.l,C.a,g.d,k.n],styles:[""]}),tt);function it(t,e){1&t&&(b.Yb(0,"mat-icon",15),b.Mc(1,"cancel"),b.Xb())}function ct(t,e){if(1&t){var i=b.Zb();b.Yb(0,"mat-chip",13),b.gc("removed",(function(t){b.Dc(i);var c=e.$implicit;return b.kc().remove(c)})),b.Mc(1),b.Kc(2,it,2,0,"mat-icon",14),b.Xb()}if(2&t){var c=e.$implicit,a=b.kc();b.qc("selectable",a.selectable)("removable",a.removable),b.Eb(1),b.Oc(" ",c.name," "),b.Eb(1),b.qc("ngIf",a.removable)}}function at(t,e){if(1&t&&(b.Yb(0,"mat-option",16),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.qc("value",i),b.Eb(1),b.Oc(" ",i.name," ")}}var nt,ot=((nt=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.visible=!0,this.selectable=!0,this.removable=!0,this.fruitCtrl=new p.f,this.subjects=[],this.allSubjects=[],this.userEmail="",this.isLoading=!1,this.update()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"add",value:function(t){console.log(t),this.fruitCtrl.setValue(null)}},{key:"remove",value:function(t){var e=this;this.adminService.editSubjectsInTeacher(this.data.teacherId,t.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"selected",value:function(t){var e=this;console.log(t),this.adminService.editSubjectsInTeacher(this.data.teacherId,t.option.value.id).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"update",value:function(){var t=this;this.isLoading=!0,this.adminService.getAllSubjects().subscribe((function(e){t.allSubjects=e,t.adminService.getTeacherSubjects(t.data.teacherId).subscribe((function(e){t.subjects=e,t.isLoading=!1,t.subjects.forEach((function(e){t.allSubjects.find((function(t){return t.id===e.id}))&&(t.allSubjects=t.allSubjects.filter((function(t){return t.id!==e.id})))}))}))}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||nt)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},nt.\u0275cmp=b.Mb({type:nt,selectors:[["app-edit-subjects-in-teacher"]],decls:15,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],["aria-label","Subjects selection"],["chipList",""],["color","accent",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Subjects",3,"formControl","matAutocomplete","matChipInputFor","matChipInputTokenEnd"],["fruitInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],["color","accent",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(t,e){if(1&t&&(b.Yb(0,"h1",0),b.Mc(1,"EDIT SUBJECTS"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-chip-list",3,4),b.Kc(6,ct,3,4,"mat-chip",5),b.Yb(7,"input",6,7),b.gc("matChipInputTokenEnd",(function(t){return e.add(t)})),b.Xb(),b.Xb(),b.Yb(9,"mat-autocomplete",8,9),b.gc("optionSelected",(function(t){return e.selected(t)})),b.Kc(11,at,2,2,"mat-option",10),b.Xb(),b.Xb(),b.Xb(),b.Yb(12,"div",11),b.Yb(13,"button",12),b.gc("click",(function(t){return e.close()})),b.Mc(14,"Close"),b.Xb(),b.Xb()),2&t){var i=b.zc(5),c=b.zc(10);b.Eb(6),b.qc("ngForOf",e.subjects),b.Eb(1),b.qc("formControl",e.fruitCtrl)("matAutocomplete",c)("matChipInputFor",i),b.Eb(4),b.qc("ngForOf",e.allSubjects),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading)}},directives:[u.g,u.d,d.b,g.c,a.k,p.c,v.c,g.b,p.o,p.g,v.a,u.c,m.b,g.a,a.l,C.a,g.d,k.n],styles:[""]}),nt),st=i("ey9i"),lt=i("d3UM");function rt(t,e){if(1&t&&(b.Yb(0,"mat-option",7),b.Mc(1),b.Xb()),2&t){var i=e.$implicit;b.qc("value",i.id),b.Eb(1),b.Oc(" ",i.name," ")}}var ut,bt=((ut=function(){function t(e,i,c,a){_classCallCheck(this,t),this.tools=e,this.dialogRef=i,this.adminService=c,this.data=a,this.classes=[],this.selectedClass="",this.userEmail="",this.isLoading=!1,this.update()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"selected",value:function(t){var e=this;console.log(t),this.adminService.changeRolesInUser(this.data.uid,t.option.value).subscribe((function(){e.tools.showNotification("Success"),e.update()}))}},{key:"onChange",value:function(t){var e=this;this.isLoading=!0,this.adminService.changeClassInStudent(t.value,this.data.uid).subscribe((function(){e.isLoading=!1,e.tools.showNotification("Success")}),(function(){e.isLoading=!1}))}},{key:"update",value:function(){var t=this;this.isLoading=!0,this.adminService.getStudentClasses(this.data.uid).subscribe((function(e){t.classes=e,-1!==t.classes.findIndex((function(t){return!0===t.active}))&&(t.selectedClass=t.classes.find((function(t){return!0===t.active})).id),t.isLoading=!1}),(function(){t.isLoading=!1}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||ut)(b.Sb(r.a),b.Sb(u.f),b.Sb(l.a),b.Sb(u.a))},ut.\u0275cmp=b.Mb({type:ut,selectors:[["app-change-class-in-student"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"cell-12"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(b.Yb(0,"h1",0),b.Mc(1,"Change a class"),b.Xb(),b.Yb(2,"div",1),b.Yb(3,"mat-form-field",2),b.Yb(4,"mat-label"),b.Mc(5,"Change a class"),b.Xb(),b.Yb(6,"mat-select",3),b.gc("ngModelChange",(function(t){return e.selectedClass=t}))("selectionChange",(function(t){return e.onChange(t)})),b.Kc(7,rt,2,2,"mat-option",4),b.Xb(),b.Xb(),b.Xb(),b.Yb(8,"div",5),b.Yb(9,"button",6),b.gc("click",(function(t){return e.close()})),b.Mc(10,"Close"),b.Xb(),b.Xb()),2&t&&(b.Eb(6),b.qc("ngModel",e.selectedClass),b.Eb(1),b.qc("ngForOf",e.classes),b.Eb(2),b.Ib("spinner",e.isLoading),b.qc("disabled",e.isLoading))},directives:[u.g,u.d,d.b,d.f,lt.a,p.o,p.r,a.k,u.c,m.b,k.n],styles:[""]}),ut),dt=i("f0Cb"),ft=i("Dh3D");function mt(t,e){1&t&&(b.Yb(0,"th",13),b.Mc(1," PIB "),b.Xb())}function ht(t,e){if(1&t&&(b.Yb(0,"p"),b.Mc(1),b.Xb()),2&t){var i=b.kc().$implicit;b.Eb(1),b.Oc(" ",i.pib," ")}}function pt(t,e){if(1&t&&(b.Yb(0,"p",17),b.Mc(1),b.Xb()),2&t){var i=b.kc().$implicit;b.Eb(1),b.Oc(" ",i.pib," ")}}function gt(t,e){1&t&&(b.Yb(0,"strong"),b.Mc(1,"[UNKNOWN]"),b.Xb())}function vt(t,e){if(1&t&&(b.Yb(0,"td",14),b.Kc(1,ht,2,1,"p",15),b.Kc(2,pt,2,1,"p",16),b.Kc(3,gt,2,0,"strong",15),b.Xb()),2&t){var i=e.$implicit,c=b.kc();b.Eb(1),b.qc("ngIf",i.pib&&i.id!==c.myUID),b.Eb(1),b.qc("ngIf",i.pib&&i.id===c.myUID),b.Eb(1),b.qc("ngIf",0==i.pib.trim().length)}}function Ct(t,e){1&t&&(b.Yb(0,"th",13),b.Mc(1," Roles "),b.Xb())}function kt(t,e){if(1&t){var i=b.Zb();b.Yb(0,"button",20),b.gc("click",(function(t){b.Dc(i);var e=b.kc().$implicit;return b.kc().editSubjects(e.id)})),b.Mc(1,"Edit subjects"),b.Xb()}}function St(t,e){if(1&t){var i=b.Zb();b.Yb(0,"button",20),b.gc("click",(function(t){b.Dc(i);var e=b.kc().$implicit;return b.kc().editClass(e.id)})),b.Mc(1,"Change a class"),b.Xb()}}function yt(t,e){if(1&t){var i=b.Zb();b.Yb(0,"td",14),b.Yb(1,"button",18),b.gc("click",(function(t){b.Dc(i);var c=e.$implicit;return b.kc().onRoles(c.id)})),b.Mc(2,"Roles"),b.Xb(),b.Kc(3,kt,2,0,"button",19),b.Kc(4,St,2,0,"button",19),b.Xb()}if(2&t){var c=e.$implicit;b.Eb(3),b.qc("ngIf",c.isTeacher),b.Eb(1),b.qc("ngIf",c.isStudent)}}function It(t,e){1&t&&b.Tb(0,"tr",21)}function Xt(t,e){1&t&&b.Tb(0,"tr",22)}var Yt,Et=function(){return[5,10,25,100]},wt=((Yt=function(){function t(e,i,c){_classCallCheck(this,t),this.dialog=e,this.adminService=i,this.authService=c,this.displayedColumns=["pib","roles"],this.pageSize=10,this.pageIndex=0,this.myUID=""}return _createClass(t,[{key:"LoadUsers",value:function(){var t=this;this.adminService.getAllUsers(1,999).subscribe((function(e){t.dataSource=new F.k(e.data),t.dataSource.paginator=t.paginator}))}},{key:"ngOnInit",value:function(){this.LoadUsers(),this.myUID=this.authService.getUserId()}},{key:"onRoles",value:function(t){var e=this;this.dialog.open(et,{width:"90%",data:{uid:t}}).afterClosed().subscribe((function(){e.LoadUsers()}))}},{key:"addUser",value:function(){var t=this;this.dialog.open(h,{width:"90%",data:{classId:0}}).afterClosed().subscribe((function(){t.adminService.getAllUsers(1,999).subscribe((function(e){t.dataSource=new F.k(e.data),t.dataSource.paginator=t.paginator}))}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"editClass",value:function(t){this.dialog.open(bt,{width:"90%",data:{uid:t}}).afterClosed()}},{key:"editSubjects",value:function(t){this.dialog.open(ot,{width:"90%",data:{teacherId:t}}).afterClosed()}}]),t}()).\u0275fac=function(t){return new(t||Yt)(b.Sb(u.b),b.Sb(l.a),b.Sb(st.c))},Yt.\u0275cmp=b.Mb({type:Yt,selectors:[["app-users"]],viewQuery:function(t,e){var i;1&t&&b.Ic(B.a,!0),2&t&&b.yc(i=b.hc())&&(e.paginator=i.first)},decls:22,vars:7,consts:[[1,"container-fluid"],["mat-raised-button","","color","primary",3,"click"],[1,"cell-12"],["matInput","","placeholder","Filter...",1,"cell-12",3,"keyup"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","pib"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","roles"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageIndex","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["style","color: darkred;",4,"ngIf"],[2,"color","darkred"],["mat-raised-button","","color","accent",2,"margin-right","1rem",3,"click"],["mat-raised-button","","color","primary","style","margin-right: 1rem",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",2,"margin-right","1rem",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Yb(0,"div",0),b.Yb(1,"button",1),b.gc("click",(function(t){return e.addUser()})),b.Mc(2," Add an user"),b.Xb(),b.Tb(3,"br"),b.Tb(4,"mat-divider"),b.Tb(5,"br"),b.Yb(6,"mat-form-field",2),b.Yb(7,"mat-label"),b.Mc(8,"Filter"),b.Xb(),b.Yb(9,"input",3),b.gc("keyup",(function(t){return e.applyFilter(t)})),b.Xb(),b.Xb(),b.Tb(10,"br"),b.Yb(11,"table",4),b.Wb(12,5),b.Kc(13,mt,2,0,"th",6),b.Kc(14,vt,4,3,"td",7),b.Vb(),b.Wb(15,8),b.Kc(16,Ct,2,0,"th",6),b.Kc(17,yt,5,2,"td",7),b.Vb(),b.Kc(18,It,1,0,"tr",9),b.Kc(19,Xt,1,0,"tr",10),b.Xb(),b.Tb(20,"mat-paginator",11,12),b.Xb()),2&t&&(b.Eb(11),b.qc("dataSource",e.dataSource),b.Eb(7),b.qc("matHeaderRowDef",e.displayedColumns),b.Eb(1),b.qc("matRowDefColumns",e.displayedColumns),b.Eb(1),b.qc("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",b.sc(6,Et)))},directives:[m.b,dt.a,d.b,d.f,f.b,F.j,ft.a,F.c,F.e,F.b,F.g,F.i,B.a,F.d,F.a,a.l,F.f,F.h],styles:[""]}),Yt),Mt=i("Gpoy"),qt=i("Wp6s"),Rt=i("MutI");function Tt(t,e){if(1&t){var i=b.Zb();b.Yb(0,"b",16),b.gc("click",(function(t){b.Dc(i);var e=b.kc().$implicit;return b.kc().saveCommand(e.message)})),b.Mc(1),b.Xb()}if(2&t){var c=b.kc().$implicit;b.Eb(1),b.Nc(c.message)}}function Ot(t,e){if(1&t&&(b.Yb(0,"b",17),b.Mc(1),b.Xb()),2&t){var i=b.kc().$implicit;b.Eb(1),b.Nc(i.message)}}function Dt(t,e){if(1&t&&(b.Yb(0,"mat-list-item",9),b.Yb(1,"h3",10),b.Yb(2,"b"),b.Mc(3),b.Xb(),b.Mc(4,": "),b.Yb(5,"span",11),b.Mc(6),b.Xb(),b.Xb(),b.Yb(7,"div",12),b.Yb(8,"div",13),b.Kc(9,Tt,2,1,"b",14),b.Kc(10,Ot,2,1,"b",15),b.Xb(),b.Xb(),b.Xb()),2&t){var i=e.$implicit;b.Eb(2),b.Jc("color",i.color),b.Eb(1),b.Nc(i.senderPib),b.Eb(3),b.Nc(i.date),b.Eb(3),b.qc("ngIf","/"===i.message[0]),b.Eb(1),b.qc("ngIf","/"!==i.message[0])}}var Ft,Lt,jt=[{path:"classes",component:Z},{path:"users",component:wt},{path:"console",component:(Ft=function(){function t(e,i){_classCallCheck(this,t),this.tools=e,this.authService=i,this.messages=[],this.message="/help",this.isLoading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.connect()}},{key:"connect",value:function(){var t=this;this._hubConnection=(new Mt.b).withUrl(st.a+"/api/hubs/console",{transport:Mt.a.WebSockets,accessTokenFactory:function(){return window.localStorage.getItem(st.e)}}).build(),this._hubConnection.start().then((function(){t.Send(),t.tools.showNotification("Connected to @console")})).catch((function(e){t.tools.showNotification("Error while starting connection"),console.log("Error while starting connection: "+e)})),this._hubConnection.on("reciveCmd",(function(e){t.messages.push(e),t.goDown()}))}},{key:"Send",value:function(){var t=this;this._hubConnection.invoke("Execute",this.message).catch((function(e){return t.Handler(e)})),this.message=""}},{key:"goDown",value:function(){var t=document.querySelector(".chat");setTimeout((function(){t.scrollTop=t.scrollHeight}),0)}},{key:"saveCommand",value:function(t){this.message=t.split(" ")[0]}},{key:"Handler",value:function(t){var e=this;-1!==t.message.toString().indexOf("because user is unauthorized")&&(this._hubConnection.stop(),this.authService.Refresh().subscribe((function(){e.connect()})))}},{key:"Clear",value:function(){this.messages=[]}},{key:"Help",value:function(){var t=this;this._hubConnection.invoke("Execute","/help").catch((function(e){return t.Handler(e)})),this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),5e3)}}]),t}(),Ft.\u0275fac=function(t){return new(t||Ft)(b.Sb(r.a),b.Sb(st.c))},Ft.\u0275cmp=b.Mb({type:Ft,selectors:[["app-console"]],decls:18,vars:5,consts:[[1,"cell-md-12","cell-12"],[1,"chat"],["tdMediaToggle","gt-xs"],["class","pad-top pad-bottom",4,"ngFor","ngForOf"],["layout","row","layout-align","start center"],["flex","","layout","row","floatPlaceholder","never",2,"width","100%"],["matInput","","placeholder","message",2,"width","100%",3,"ngModel","ngModelChange"],["type","submit","color","primary","mat-raised-button","","mat-button","",3,"disabled","click"],["type","submit","color","primary","mat-raised-button","","mat-button","",2,"margin-left","1rem",3,"disabled","click"],[1,"pad-top","pad-bottom"],["matLine","",1,"cursor-pointer"],[1,"tc-grey-500","md-caption"],["matLine",""],[1,"text-wrap",2,"word-wrap","break-word"],["style","padding-left: 1rem; cursor: pointer;",3,"click",4,"ngIf"],["style","padding-left: 1rem;",4,"ngIf"],[2,"padding-left","1rem","cursor","pointer",3,"click"],[2,"padding-left","1rem"]],template:function(t,e){1&t&&(b.Yb(0,"div",0),b.Yb(1,"div",1),b.Yb(2,"mat-card",2),b.Yb(3,"mat-card-subtitle"),b.Mc(4,"Console"),b.Xb(),b.Yb(5,"mat-list"),b.Kc(6,Dt,11,6,"mat-list-item",3),b.Xb(),b.Xb(),b.Xb(),b.Tb(7,"mat-divider"),b.Yb(8,"mat-card"),b.Yb(9,"div",4),b.Yb(10,"mat-form-field",5),b.Yb(11,"textarea",6),b.gc("ngModelChange",(function(t){return e.message=t})),b.Xb(),b.Xb(),b.Yb(12,"button",7),b.gc("click",(function(t){return e.Send()})),b.Mc(13,"Send"),b.Xb(),b.Yb(14,"button",8),b.gc("click",(function(t){return e.Help()})),b.Mc(15,"Help"),b.Xb(),b.Yb(16,"button",8),b.gc("click",(function(t){return e.Clear()})),b.Mc(17,"Clear"),b.Xb(),b.Xb(),b.Xb(),b.Xb()),2&t&&(b.Eb(6),b.qc("ngForOf",e.messages),b.Eb(5),b.qc("ngModel",e.message),b.Eb(1),b.qc("disabled",0==e.message.length),b.Eb(2),b.qc("disabled",e.isLoading),b.Eb(2),b.qc("disabled",0===e.messages.length))},directives:[qt.a,qt.e,Rt.a,a.k,dt.a,d.b,f.b,p.c,p.o,p.r,m.b,Rt.d,k.j,a.l],styles:[".chat[_ngcontent-%COMP%]{height:555px;overflow-y:scroll;overflow-wrap:inherit}.mat-option.mat-selected[_ngcontent-%COMP%]{background:red!important}.mat-option.mat-active[_ngcontent-%COMP%]{background:#00f!important}mat-list-option[aria-selected=true][_ngcontent-%COMP%]{background:rgba(0,139,139,.7)}.mat-pseudo-checkbox[_ngcontent-%COMP%]{display:none!important;visibility:hidden!important}"]}),Ft)}],Kt=((Lt=function t(){_classCallCheck(this,t)}).\u0275mod=b.Qb({type:Lt}),Lt.\u0275inj=b.Pb({factory:function(t){return new(t||Lt)},imports:[[n.i.forChild(jt)],n.i]}),Lt),_t=i("M0ag");i.d(e,"AdminModule",(function(){return $t}));var Nt,$t=((Nt=function t(){_classCallCheck(this,t)}).\u0275mod=b.Qb({type:Nt}),Nt.\u0275inj=b.Pb({factory:function(t){return new(t||Nt)},imports:[[a.c,Kt,_t.a]]}),Nt)}}]);