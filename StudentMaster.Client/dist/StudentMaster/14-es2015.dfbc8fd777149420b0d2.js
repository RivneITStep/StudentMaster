(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{WYhO:function(t,e,o){"use strict";o.r(e);var i=o("ofXK"),a=o("tyNb"),c=o("pdwM"),s=o("g6P3"),n=o("0IaG"),r=o("3Pt+"),l=o("D7qI"),b=o("P0IN");class m{}var d=o("fXoL"),h=o("kt0X"),u=o("xHqg"),f=o("kmnG"),p=o("d3UM"),g=o("qFsG"),k=o("iadO"),w=o("bTqV"),X=o("FKr1");function Y(t,e){1&t&&d.Mc(0,"Setting")}function M(t,e){if(1&t&&(d.Yb(0,"mat-option",21),d.Mc(1),d.Xb()),2&t){const t=e.$implicit;d.rc("value",t.id),d.Eb(1),d.Oc(" ",t.name," ")}}function S(t,e){1&t&&d.Mc(0,"File")}let D=(()=>{class t{constructor(t,e,o,i,a,c,s){this.dialogRef=t,this.data=e,this.fb=o,this.tools=i,this.hS=a,this.tS=c,this.store=s,this.isLinear=!0,this.isLoading=!1,this.error="",this.done="",this.maxDate=new Date,this.minDate=new Date,this.subjects=[]}ngOnInit(){this.maxDate.setDate(this.minDate.getDate()+7),this.infoForm=this.fb.group({theme:["",[r.v.required]],date:["",[r.v.required]],subject:["",[r.v.required]]}),this.dataForm=this.fb.group({homework:["",[r.v.required]]}),this.store.select("teacher").subscribe(t=>{console.log(t),this.subjects=t.subjects})}onSubmitInfoForm(t){t.next()}onSubmitDataForm(t){const e=this.infoForm.value,o=this.dataForm.value;console.log(o);const i=new m;this.isLoading=!0,i.classId=this.data.classId,i.file=o.homework,i.subjectId=e.subject,i.theme=e.theme,i.toTime=e.date,console.log("data: ",i);const a=new FormData;let c=-1;this.store.select("teacher").subscribe(t=>{c=t.selectedClass}),a.append("classId",c.toString()),a.append("Theme",i.theme),a.append("subjectId",i.subjectId),a.append("file",i.file),a.append("toTime",new Date(i.toTime).toDateString()),this.hS.AddHomeWorkAsync(a).subscribe(e=>{this.isLoading=!1,this.tools.showNotification("Homework added"),t.reset(),this.dialogRef.close()},t=>{this.isLoading=!1,this.dialogRef.close()})}onPickImage(){const t=document.getElementById("fileSelector");t.click(),t.onchange=t=>{console.log(t.target.files[0].type),t.target.files[0].type.indexOf("image")&&t.target.files[0].type.indexOf("text/plain")?(this.tools.showNotification("Please select valid file"),this.dialogRef.close()):this.dataForm.controls.homework.setValue(t.target.files[0])}}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(n.f),d.Sb(n.a),d.Sb(r.e),d.Sb(l.a),d.Sb(b.a),d.Sb(l.a),d.Sb(h.h))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-add-homework"]],decls:41,vars:17,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"cell-12"],["formControlName","subject"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Select date","formControlName","date",3,"matDatepicker","max","min"],["matSuffix","",3,"for"],["touchUi",""],["datapicker",""],["matInput","","placeholder","Input Theme","formControlName","theme"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",2,"margin","2rem",3,"click"],["id","fileSelector","type","file",2,"display","none"],["mat-raised-button","","matStepperPrevious","",2,"margin-right","1rem",3,"disabled"],["mat-dialog-actions",""],["mat-button","",3,"click"],[3,"value"]],template:function(t,e){if(1&t){const t=d.Zb();d.Yb(0,"h1",0),d.Mc(1,"Add homework!"),d.Xb(),d.Yb(2,"div",1),d.Yb(3,"mat-horizontal-stepper",2,3),d.Yb(5,"mat-step",4),d.Yb(6,"form",5),d.Kc(7,Y,1,0,"ng-template",6),d.Yb(8,"mat-form-field",7),d.Yb(9,"mat-label"),d.Mc(10,"Select subject"),d.Xb(),d.Yb(11,"mat-select",8),d.Kc(12,M,2,2,"mat-option",9),d.Xb(),d.Xb(),d.Tb(13,"br"),d.Yb(14,"mat-form-field",7),d.Tb(15,"input",10),d.Tb(16,"mat-datepicker-toggle",11),d.Tb(17,"mat-datepicker",12,13),d.Xb(),d.Yb(19,"mat-form-field",7),d.Yb(20,"mat-label"),d.Mc(21,"Input theme"),d.Xb(),d.Tb(22,"input",14),d.Xb(),d.Yb(23,"div"),d.Yb(24,"button",15),d.gc("click",(function(o){d.Dc(t);const i=d.zc(4);return e.onSubmitInfoForm(i)})),d.Mc(25," Next "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(26,"mat-step",4),d.Yb(27,"form",5),d.Kc(28,S,1,0,"ng-template",6),d.Yb(29,"button",16),d.gc("click",(function(t){return e.onPickImage()})),d.Mc(30," Choose file! "),d.Xb(),d.Tb(31,"input",17),d.Tb(32,"br"),d.Yb(33,"div"),d.Yb(34,"button",18),d.Mc(35," Back "),d.Xb(),d.Yb(36,"button",15),d.gc("click",(function(o){d.Dc(t);const i=d.zc(4);return e.onSubmitDataForm(i)})),d.Mc(37," Add "),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Yb(38,"div",19),d.Yb(39,"button",20),d.gc("click",(function(t){return e.close()})),d.Mc(40,"Close"),d.Xb(),d.Xb()}if(2&t){const t=d.zc(18);d.Eb(3),d.qc("linear",e.isLinear),d.Eb(2),d.qc("stepControl",e.infoForm),d.Eb(1),d.qc("formGroup",e.infoForm),d.Eb(6),d.qc("ngForOf",e.subjects),d.Eb(3),d.qc("matDatepicker",t)("max",e.maxDate)("min",e.minDate),d.Eb(1),d.qc("for",t),d.Eb(8),d.qc("disabled",e.infoForm.invalid),d.Eb(2),d.qc("stepControl",e.dataForm),d.Eb(1),d.qc("formGroup",e.dataForm),d.Eb(7),d.Ib("spinner",e.isLoading),d.qc("disabled",e.isLoading),d.Eb(2),d.Ib("spinner",e.isLoading),d.qc("disabled",e.dataForm.invalid||e.isLoading)}},directives:[n.g,n.d,u.a,u.b,r.w,r.p,r.j,u.c,f.b,f.f,p.a,r.o,r.h,i.k,g.b,r.c,k.c,k.e,f.h,k.b,w.b,u.f,n.c,X.n],styles:[""]}),t})();var C=o("auE4"),v=o("wZkO"),I=o("lfTk"),F=o("+0xr");function y(t,e){1&t&&(d.Yb(0,"th",14),d.Mc(1," No. "),d.Xb())}function q(t,e){if(1&t&&(d.Yb(0,"td",15),d.Mc(1),d.Xb()),2&t){const t=e.$implicit;d.Eb(1),d.Oc(" ",t.position," ")}}function E(t,e){1&t&&(d.Yb(0,"th",14),d.Mc(1," PIB "),d.Xb())}function T(t,e){if(1&t&&(d.Yb(0,"td",15),d.Mc(1),d.Xb()),2&t){const t=e.$implicit;d.Eb(1),d.Oc(" ",t.pib," ")}}function O(t,e){1&t&&(d.Yb(0,"th",14),d.Mc(1," Marks "),d.Xb())}function K(t,e){if(1&t){const t=d.Zb();d.Yb(0,"td",15),d.Yb(1,"button",16),d.gc("click",(function(o){d.Dc(t);const i=e.$implicit;return d.kc(2).openDialog(i.id)})),d.Mc(2,"Add a mark"),d.Xb(),d.Xb()}}function j(t,e){1&t&&(d.Yb(0,"th",14),d.Mc(1," Control Work "),d.Xb())}function x(t,e){1&t&&d.Tb(0,"td",15)}function P(t,e){1&t&&d.Tb(0,"tr",17)}function H(t,e){1&t&&d.Tb(0,"tr",18)}function L(t,e){if(1&t){const t=d.Zb();d.Yb(0,"mat-tab",2),d.Yb(1,"div",3),d.Yb(2,"button",4),d.gc("click",(function(e){return d.Dc(t),d.kc().addHomeWork()})),d.Mc(3,"Add homework"),d.Xb(),d.Tb(4,"br"),d.Tb(5,"app-group-chat"),d.Yb(6,"table",5),d.Wb(7,6),d.Kc(8,y,2,0,"th",7),d.Kc(9,q,2,1,"td",8),d.Vb(),d.Wb(10,9),d.Kc(11,E,2,0,"th",7),d.Kc(12,T,2,1,"td",8),d.Vb(),d.Wb(13,10),d.Kc(14,O,2,0,"th",7),d.Kc(15,K,3,0,"td",8),d.Vb(),d.Wb(16,11),d.Kc(17,j,2,0,"th",7),d.Kc(18,x,1,0,"td",8),d.Vb(),d.Kc(19,P,1,0,"tr",12),d.Kc(20,H,1,0,"tr",13),d.Xb(),d.Xb(),d.Xb()}if(2&t){const t=e.$implicit,o=d.kc();d.rc("label",t.name),d.Eb(5),d.Gb(t.id),d.Eb(1),d.qc("dataSource",o.dataSource),d.Eb(13),d.qc("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),d.Eb(1),d.qc("matRowDefColumns",o.displayedColumns)}}let R=(()=>{class t{constructor(t,e,o){this.dialog=t,this.store=e,this.classService=o,this.displayedColumns=["position","PIB","Marks","ControlMark"],this.selectedClass=0,this.classes=[]}ngOnInit(){this.classService.getClasses().subscribe(t=>{this.classes=t,0!==t.length&&(this.selectedClass=t[0].id,this.store.dispatch(new C.c(t[0].id)),this.store.dispatch(new C.a(t[0].id)))}),this.store.select("teacher").subscribe(t=>{this.dataSource=t.students})}openDialog(t){this.dialog.open(s.a,{width:"90%",data:{id:t,classId:this.selectedClass}}).afterClosed()}addHomeWork(){this.dialog.open(D,{width:"90%",data:{classId:this.selectedClass}}).afterClosed()}onChange(t){this.selectedClass=this.classes[t].id,this.store.dispatch(new C.c(this.classes[t].id)),this.store.dispatch(new C.a(this.classes[t].id))}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(n.b),d.Sb(h.h),d.Sb(c.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[["mat-align-tabs","center","animationDuration","2000ms",3,"selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[1,"container-fluid"],["mat-stroked-button","","color","accent",1,"cell-md-3","cell-12",2,"margin","1rem",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","PIB"],["matColumnDef","Marks"],["matColumnDef","ControlMark"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-stroked-button","","color","accent",2,"margin","1rem",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.Yb(0,"mat-tab-group",0),d.gc("selectedIndexChange",(function(t){return e.onChange(t)})),d.Kc(1,L,21,7,"mat-tab",1),d.Xb()),2&t&&(d.Eb(1),d.qc("ngForOf",e.classes))},directives:[v.b,i.k,v.a,w.b,I.a,F.j,F.c,F.e,F.b,F.g,F.i,F.d,F.a,F.f,F.h],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t})();var W=o("ey9i"),N=o("Wp6s"),A=o("MutI");function $(t,e){1&t&&(d.Yb(0,"h1",2),d.Mc(1,"No homeworks yet."),d.Xb())}function _(t,e){if(1&t&&(d.Yb(0,"mat-option",10),d.Mc(1),d.Xb()),2&t){const t=e.$implicit;d.qc("value",t),d.Eb(1),d.Oc(" ",t," ")}}const G=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]};function B(t,e){if(1&t){const t=d.Zb();d.Yb(0,"mat-card"),d.Yb(1,"mat-list",3),d.Yb(2,"mat-list-item",4),d.Yb(3,"p",5),d.Mc(4,"PIB:"),d.Xb(),d.Mc(5),d.Xb(),d.Yb(6,"mat-list-item",4),d.Yb(7,"p",5),d.Mc(8,"Subject:"),d.Xb(),d.Mc(9),d.Xb(),d.Yb(10,"mat-list-item",4),d.Yb(11,"p",5),d.Mc(12,"Theme:"),d.Xb(),d.Mc(13),d.Xb(),d.Yb(14,"mat-list-item",4),d.Yb(15,"p",5),d.Mc(16,"Task:"),d.Xb(),d.Yb(17,"a",6),d.Mc(18,"Download"),d.Xb(),d.Xb(),d.Yb(19,"mat-list-item",4),d.Yb(20,"p",5),d.Mc(21,"Student Work:"),d.Xb(),d.Yb(22,"a",7),d.Mc(23,"Download"),d.Xb(),d.Xb(),d.Tb(24,"br"),d.Yb(25,"mat-list-item",4),d.Yb(26,"p",5),d.Mc(27,"Mark:"),d.Xb(),d.Yb(28,"mat-form-field",5),d.Yb(29,"mat-label"),d.Mc(30,"Mark"),d.Xb(),d.Yb(31,"mat-select",8),d.gc("selectionChange",(function(o){d.Dc(t);const i=e.$implicit;return d.kc().changeSelection(i.id,o)})),d.Kc(32,_,2,2,"mat-option",9),d.Xb(),d.Xb(),d.Xb(),d.Xb(),d.Tb(33,"br"),d.Xb()}if(2&t){const t=e.$implicit,o=d.kc();d.Eb(5),d.Oc(" ",t.pib," "),d.Eb(4),d.Oc(" ",t.subject," "),d.Eb(4),d.Oc(" ",t.theme,""),d.Eb(4),d.qc("href",o.file_url+t.file,d.Fc),d.Eb(5),d.qc("href",o.file_url+t.student_file,d.Fc),d.Eb(10),d.qc("ngForOf",d.sc(6,G))}}const V=[{path:"dashboard",component:R,canActivate:[W.b]},{path:"homeworks",component:(()=>{class t{constructor(t,e){this.hs=t,this.tools=e,this.homeworks=[],this.file_url=""}ngOnInit(){this.file_url=W.d,this.hs.getTeacherHomeworks().subscribe(t=>{this.homeworks=t})}changeSelection(t,e){this.hs.reviewHomeWork(t,e.value).subscribe(()=>{this.tools.showNotification("Success")})}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(b.a),d.Sb(l.a))},t.\u0275cmp=d.Mb({type:t,selectors:[["app-homeworks"]],decls:2,vars:2,consts:[["class","cell-12","style","text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cell-12",2,"text-align","center"],["role","list"],["role","listitem"],[1,"cell-3"],["target","_blank","mat-raised-button","","color","primary","download","task",1,"cell-md-3","cell-6",2,"margin","1rem",3,"href"],["target","_blank","mat-raised-button","","color","primary","download","studentwork",1,"cell-md-3","cell-6",2,"margin","1rem",3,"href"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(d.Kc(0,$,2,0,"h1",0),d.Kc(1,B,34,7,"mat-card",1)),2&t&&(d.qc("ngIf",0===e.homeworks.length),d.Eb(1),d.qc("ngForOf",e.homeworks))},directives:[i.l,i.k,N.a,A.a,A.d,w.a,f.b,f.f,p.a,X.n],styles:[""]}),t})(),canActivate:[W.b]}];let Z=(()=>{class t{}return t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(V)],a.i]}),t})();var z=o("M0ag");o.d(e,"TeacherModule",(function(){return J}));let J=(()=>{class t{}return t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({factory:function(e){return new(e||t)},imports:[[i.c,Z,z.a]]}),t})()}}]);