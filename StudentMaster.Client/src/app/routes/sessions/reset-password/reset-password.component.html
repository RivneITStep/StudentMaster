<div class="w-full h-full" fxLayout="row wrap" fxLayoutAlign="center center">
  <mat-card
    class="mat-elevation-z4 m-b-0 cell-md-6 cell-12"
  >
    <mat-card-title class="text-center m-b-24">Reset password!</mat-card-title>
    <mat-card-content>
      <mat-horizontal-stepper [linear]="isLinear" #stepper>
        <mat-step [stepControl]="emailOrPhoneNumber">
          <form [formGroup]="emailOrPhoneNumber">
            <ng-template matStepLabel>Email</ng-template>
            <mat-form-field class="cell-12">
              <input  autocomplete="on" type="text"   matInput placeholder="Input email or phone number"
                formControlName="data" required>
            </mat-form-field>
            <div >
              <mat-progress-bar mode="indeterminate"  *ngIf="this.isLoading"></mat-progress-bar>
              <button mat-raised-button color="primary" [disabled]="this.isLoading  && this.emailOrPhoneNumber.invalid"
                (click)="sendResetPasswordRequest(stepper)">Next</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="confirmCode">
          <form [formGroup]="confirmCode">
            <ng-template matStepLabel>Confirm</ng-template>
            <mat-form-field class="cell-12">
              <input  autocomplete="on" type="password"   matInput placeholder="We send you confirm code. Input your code."
                formControlName="code" required>
            </mat-form-field>
            <div >
              <mat-progress-bar mode="indeterminate" *ngIf="this.isLoading"></mat-progress-bar>
              <button mat-raised-button color="primary" [disabled]="this.isLoading && this.confirmCode.invalid" (click)="useConfirmCodeWithEmail(stepper)">Next</button>
            </div>
          </form>
        </mat-step>
        <mat-step [stepControl]="newPasswrod">
          <form [formGroup]="newPasswrod">
            <ng-template matStepLabel>New Password</ng-template>
            <mat-form-field class="cell-md-6 cell-12">
              <input  autocomplete="off" type="password" matInput placeholder="New Password" formControlName="password" required>
            </mat-form-field>
            <br>
            <mat-form-field class="cell-md-6 cell-12">
              <input  autocomplete="off" type="password" matInput placeholder="Confirm Password" formControlName="confirm" required>
            </mat-form-field>
            <div>
              <mat-progress-bar mode="indeterminate" *ngIf="this.isLoading"></mat-progress-bar>
              <button mat-raised-button color="primary" [disabled]="this.isLoading && newPasswrod.invalid" (click)="changePassword(stepper)">Change</button>
            </div>
          </form>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Result</ng-template>
          Your password has been changed!
          <div>
            <mat-progress-bar mode="indeterminate" *ngIf="this.isLoading"></mat-progress-bar>
            <button mat-raised-button color="primary" [disabled]="this.isLoading" (click)=" stepper.reset()">OK</button>
          </div>
        </mat-step>
      </mat-horizontal-stepper>
    </mat-card-content>
    <div class="m-t-16">
      <a routerLink="/auth/login">Sign in</a>
    </div>
  </mat-card>
</div>
